<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Serial Peripheral Interface Reusable Driver: Serial Peripheral Interface (SPI) Reusable Driver - Version 1.1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Serial Peripheral Interface Reusable Driver<span id="projectnumber">&#160;v1.1</span>
   </div>
   <div id="projectbrief">This project implements SPI reusable driver that can be adapted to various microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Serial Peripheral Interface (SPI) Reusable Driver - Version 1.1 </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#intro">Introduction</a>
  </li>
  <li class="level1">
    <a href="#version">Version History</a>
  </li>
  <li class="level1">
    <a href="#architecture">Software Architecture</a>
  </li>
  <li class="level1">
    <a href="#standards">Coding Standards</a>
  </li>
  <li class="level1">
    <a href="#description">Project Description</a>
  </li>
  <li class="level1">
    <a href="#requirements">Project Goals</a>
  </li>
  <li class="level1">
    <a href="#tools">Development Tools</a>
  </li>
  <li class="level1">
    <a href="#usage">Usage &amp; Documentation</a>
  </li>
  <li class="level1">
    <a href="#acronyms">Glossary</a>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>This project is a personal initiative aimed at developing reusable firmware components for microcontroller platforms. It focuses on creating a modular and efficient Serial Peripheral Interface (SPI) driver that can be easily adapted across various microcontroller families. The DIO driver is utilized to configure the selected SPI port for physical connectivity.</p>
<h1><a class="anchor" id="version"></a>
Version History</h1>
<ul>
<li><b>v1.0</b>: Initial release.</li>
<li><b>v1.1</b>: Updated documentation, structural improvements, and design by contract enhancements.</li>
</ul>
<h1><a class="anchor" id="architecture"></a>
Software Architecture</h1>
<p>The software architecture follows a layered approach. This design pattern separates low-level driver code (HALs) from application-specific code, promoting reusability and simplifying portability between different applications or microcontrollers. The layered architecture can be seen in figure 1 and contains a driver and application layer operating on the hardware.</p>
<center> <table class="doxtable">
<tr>
<td style="background-color: #eaf2ff; text-align: center;">Application Code  </td></tr>
<tr>
<td style="background-color: #e8f8e8; text-align: center;">Drivers  </td></tr>
<tr>
<td style="background-color: #fffbe6; text-align: center;">Hardware  </td></tr>
</table>
Figure 1. Two-Layer Software Architecture. </center><p>The <b>Driver Layer</b> includes all necessary low-level code to initialize and manage hardware peripherals like SPI modules. <br  />
 The <b>Application Layer</b> contains no hardware-specific code but instead interacts with the hardware through the driver interfaces, ensuring abstraction and easier maintenance.</p>
<h1><a class="anchor" id="standards"></a>
Coding Standards</h1>
<p>This project is developed as bare-metal firmware and adheres to industry-standard coding practices, specifically the <b>MISRA-C</b> guidelines. <br  />
 Best practices such as consistent naming conventions, clear code formatting, modularity, and detailed documentation are followed throughout.</p>
<h1><a class="anchor" id="description"></a>
Project Description</h1>
<p>This demonstration configures the SPI1 peripheral as a <b>master device</b> with the following settings:</p><ul>
<li><b>Baud rate</b>: 4 kHz.</li>
<li><b>Communication</b>: Full duplex.</li>
<li><b>Data frame format</b>: 8 bits.</li>
<li><b>Bit order</b>: Most Significant Bit (MSB) first.</li>
</ul>
<p>The physical connections between the STM32 Nucleo board and the KY-57 logic analyzer are configured using the DIO driver and follow this mapping:</p>
<center></center><center><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">SPI Connection   </th><th class="markdownTableHeadNone">Master   </th><th class="markdownTableHeadNone">Logic Analyzer    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NSS   </td><td class="markdownTableBodyNone">PA9   </td><td class="markdownTableBodyNone">CH4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SCK   </td><td class="markdownTableBodyNone">PA5   </td><td class="markdownTableBodyNone">CH1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MISO   </td><td class="markdownTableBodyNone">PA6   </td><td class="markdownTableBodyNone">CH2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MOSI   </td><td class="markdownTableBodyNone">PA7   </td><td class="markdownTableBodyNone">CH3   </td></tr>
</table>
Table 1. SPI Pin Connections. </center><p>During operation, the master continuously transmits the data byte <b>0x56</b> to the KY-57 logic analyzer for capture and analysis.</p>
<h1><a class="anchor" id="requirements"></a>
Project Goals</h1>
<ul>
<li>Provide a reusable, modular SPI driver for embedded applications.</li>
<li>Maintain portability across different microcontroller platforms.</li>
<li>Follow industry-standard coding guidelines (MISRA-C) for reliability and maintainability.</li>
</ul>
<h1><a class="anchor" id="tools"></a>
Development Tools</h1>
<ul>
<li><b>Development Board</b>: STM32 Nucleo-F401RE. <br  />
</li>
<li><b>IDE/Debugger</b>: Visual Studio Code with PlatformIO extension. <br  />
</li>
<li><b>Toolchain</b>: GNU ARM Embedded Toolchain.</li>
</ul>
<h1><a class="anchor" id="usage"></a>
Usage &amp; Documentation</h1>
<p>The project is fully documented using Doxygen. <br  />
 Extensive inline comments provide insights into the functionality, assumptions, and limitations of the code. <br  />
 The Doxygen-generated documentation offers a structured and easy-to-navigate reference for developers.</p>
<h1><a class="anchor" id="acronyms"></a>
Glossary</h1>
<ul>
<li><b>SPI</b>: Serial Peripheral Interface.</li>
<li><b>DIO</b>: Digital Input/Output. </li>
</ul>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
