\doxysection{C\+:/\+Users/\+User/\+One\+Drive/\+Documents/1.Repositories/\+Embedded\+Systems/\+STM32/\+Reusable-\/\+Drivers/\+SPI slave/src/spi\+\_\+cfg.c File Reference}
\hypertarget{_s_p_i_01slave_2src_2spi__cfg_8c}{}\label{_s_p_i_01slave_2src_2spi__cfg_8c}\index{C:/Users/User/OneDrive/Documents/1.Repositories/EmbeddedSystems/STM32/Reusable-\/Drivers/SPI slave/src/spi\_cfg.c@{C:/Users/User/OneDrive/Documents/1.Repositories/EmbeddedSystems/STM32/Reusable-\/Drivers/SPI slave/src/spi\_cfg.c}}


This module contains the implementation for the Serial Peripheral Interface (SPI).  


{\ttfamily \#include "{}spi\+\_\+cfg.\+h"{}}\newline
Include dependency graph for spi\+\_\+cfg.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=263pt]{_s_p_i_01slave_2src_2spi__cfg_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{struct_spi_config__t}{Spi\+Config\+\_\+t}} \texorpdfstring{$\ast$}{*}const \mbox{\hyperlink{_s_p_i_01slave_2src_2spi__cfg_8c_a72af5b1b28647c0f42591ecd067fccb9}{SPI\+\_\+\+Config\+Get}} (void)
\item 
size\+\_\+t \mbox{\hyperlink{_s_p_i_01slave_2src_2spi__cfg_8c_a52c2bcd5d6de69c68453237ffc72e724}{SPI\+\_\+config\+Size\+Get}} (void)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{struct_spi_config__t}{Spi\+Config\+\_\+t}} \mbox{\hyperlink{_s_p_i_01slave_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}{Spi\+Config}} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This module contains the implementation for the Serial Peripheral Interface (SPI). 

\begin{DoxyAuthor}{Author}
Jose Luis Figueroa. 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2025-\/03-\/11
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2025 Jose Luis Figueroa. MIT License. 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\Hypertarget{_s_p_i_01slave_2src_2spi__cfg_8c_a72af5b1b28647c0f42591ecd067fccb9}\index{spi\_cfg.c@{spi\_cfg.c}!SPI\_ConfigGet@{SPI\_ConfigGet}}
\index{SPI\_ConfigGet@{SPI\_ConfigGet}!spi\_cfg.c@{spi\_cfg.c}}
\doxysubsubsection{\texorpdfstring{SPI\_ConfigGet()}{SPI\_ConfigGet()}}
{\footnotesize\ttfamily \label{_s_p_i_01slave_2src_2spi__cfg_8c_a72af5b1b28647c0f42591ecd067fccb9} 
const \mbox{\hyperlink{struct_spi_config__t}{Spi\+Config\+\_\+t}} \texorpdfstring{$\ast$}{*}const SPI\+\_\+\+Config\+Get (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

{\bfseries{Description\+:}} This function is used to initialize the SPI based on the configuration table defined in spi\+\_\+cfg module.

PRE-\/\+CONDITION\+: configuration table needs to be populated (sizeof \texorpdfstring{$>$}{>} 0). ~\newline
 POST-\/\+CONDITION\+: A constant pointer to the first member of the configuration table will be returned. ~\newline


\begin{DoxyReturn}{Returns}
A pointer to the configuration table. ~\newline

\end{DoxyReturn}
{\bfseries{Example\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_spi_config__t}{SpiConfig\_t}}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}{SpiConfig}}\ =\ \mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a72af5b1b28647c0f42591ecd067fccb9}{SPI\_ConfigGet}}();}
\DoxyCodeLine{\textcolor{keywordtype}{size\_t}\ configSize\ =\ \mbox{\hyperlink{_s_p_i___master_2src_2dio__cfg_8c_a5547c2e77c21e6b9c3605d9e518d2a80}{DIO\_configSizeGet}}();}
\DoxyCodeLine{}
\DoxyCodeLine{SPI\_Init(\mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}{SpiConfig}},\ configSize);}

\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
SPI\+\_\+config\+Get 

\doxylink{_s_p_i___master_2src_2spi__cfg_8c_a52c2bcd5d6de69c68453237ffc72e724}{SPI\+\_\+config\+Size\+Get} 

SPI\+\_\+\+Init 

SPI\+\_\+\+Transfer 

SPI\+\_\+\+Register\+Write 

SPI\+\_\+\+Register\+Read 

SPI\+\_\+\+Callback\+Register 
\end{DoxySeeAlso}
\Hypertarget{_s_p_i_01slave_2src_2spi__cfg_8c_a52c2bcd5d6de69c68453237ffc72e724}\index{spi\_cfg.c@{spi\_cfg.c}!SPI\_configSizeGet@{SPI\_configSizeGet}}
\index{SPI\_configSizeGet@{SPI\_configSizeGet}!spi\_cfg.c@{spi\_cfg.c}}
\doxysubsubsection{\texorpdfstring{SPI\_configSizeGet()}{SPI\_configSizeGet()}}
{\footnotesize\ttfamily \label{_s_p_i_01slave_2src_2spi__cfg_8c_a52c2bcd5d6de69c68453237ffc72e724} 
size\+\_\+t SPI\+\_\+config\+Size\+Get (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

{\bfseries{Description\+:}} This function is used to get the size of the configuration table.

PRE-\/\+CONDITION\+: configuration table needs to be populated (sizeof \texorpdfstring{$>$}{>} 0) ~\newline


POST-\/\+CONDITION\+: The size of the configuration table will be returned. ~\newline


\begin{DoxyReturn}{Returns}
The size of the configuration table. ~\newline

\end{DoxyReturn}
{\bfseries{Example\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_spi_config__t}{SpiConfig\_t}}\ *\ \textcolor{keyword}{const}\ \mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}{SpiConfig}}\ =\ \mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a72af5b1b28647c0f42591ecd067fccb9}{SPI\_ConfigGet}}();}
\DoxyCodeLine{\textcolor{keywordtype}{size\_t}\ configSize\ =\ \mbox{\hyperlink{_s_p_i___master_2src_2dio__cfg_8c_a5547c2e77c21e6b9c3605d9e518d2a80}{DIO\_configSizeGet}}();}
\DoxyCodeLine{}
\DoxyCodeLine{SPI\_Init(\mbox{\hyperlink{_s_p_i___master_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}{SpiConfig}},\ configSize);}

\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
SPI\+\_\+config\+Get 

\doxylink{_s_p_i___master_2src_2spi__cfg_8c_a52c2bcd5d6de69c68453237ffc72e724}{SPI\+\_\+config\+Size\+Get} 

SPI\+\_\+\+Init 

SPI\+\_\+\+Transfer 

SPI\+\_\+\+Register\+Write 

SPI\+\_\+\+Register\+Read 

SPI\+\_\+\+Callback\+Register 
\end{DoxySeeAlso}


\doxysubsection{Variable Documentation}
\Hypertarget{_s_p_i_01slave_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84}\index{spi\_cfg.c@{spi\_cfg.c}!SpiConfig@{SpiConfig}}
\index{SpiConfig@{SpiConfig}!spi\_cfg.c@{spi\_cfg.c}}
\doxysubsubsection{\texorpdfstring{SpiConfig}{SpiConfig}}
{\footnotesize\ttfamily \label{_s_p_i_01slave_2src_2spi__cfg_8c_a19dbdd2a49e995603d1f6506823d2f84} 
const \mbox{\hyperlink{struct_spi_config__t}{Spi\+Config\+\_\+t}} Spi\+Config\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ }
\DoxyCodeLine{\{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \{\mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_a8ed88c83798d221d2afb7ab8b4023faaae01f25f2493c2b0a1406ee1371a2752d}{SPI\_CHANNEL1}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_af7fd666f01e1a2fe00c42b85eaa3bf4dad9636eac0759655110aa77dd6c22da6c}{SPI\_MODE3}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_a402dd0baa9458df07d91ef47836ffe47abc98c1546fe12d3fceb1f86cf670faa9}{SPI\_SLAVE}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_a3cb3dda1124db8846befff5be1bdfb2fa8231bf0ac5d9725518ece77bfd9bec1e}{SPI\_FPCLK4}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_a474aab4df5cccbad97f07bffe96dfb34af8450bb54c06e3a67b95f5730c1d42f7}{SPI\_HARDWARE\_NSS\_DISABLED}},\ }
\DoxyCodeLine{\ \ \ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_ad0d0fad64f9813e5853f46b5bc1a3af9a1eae4fe3047bf4fbef593e1d39562f45}{SPI\_MSB}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_ad62f9d63a1ab4982d18a733bec771326ab90ebf6910c1da04cfe4fe611b46866f}{SPI\_FULL\_DUPLEX}},\ \mbox{\hyperlink{_s_p_i___master_2include_2spi__cfg_8h_abcc4f72e578adda03140d4dd9e459ebaa7d0f3f931e11690790cd430da3023142}{SPI\_8BITS}}\},}
\DoxyCodeLine{\}}

\end{DoxyCode}
The following array contains the configuration data for each Serial Peripheral Interface. Each row represent a single SPI configuration. Each column is representing a member of the \doxylink{struct_spi_config__t}{Spi\+Config\+\_\+t} structure. This table is read in by SPI\+\_\+\+Init, where each channel is then set up based on this table. The SPI\+\_\+\+CHANNELS\+\_\+\+NUMBER constant should be agreed with the number of row. 